<!DOCTYPE html>
<html>
    <script>
        function computerPlay() {
            let hand = ["rock", "paper", "scissors"];
            let i = Math.floor(Math.random()*3);

            return hand[i];
        }

        function playRound(playerSelection, computerSelection){
            playerSelection = playerSelection.toLowerCase();
            computerSelection = computerSelection.toLowerCase();
            let hand = {r:"rock", p:"paper", s:"scissors"};
            let outcome = {w:"You Win! ", l:"You Lose! ", d:"Draw!"};
            let rule= {r:"Rock crushes Scissors", p:"Paper covers Rock", s:"Scissors cut Paper"};
            let m = "";


            if(playerSelection === computerSelection) {
                m = outcome.d;
            }else{
                switch(playerSelection) {
                    // players is rock
                    case hand.r:
                        // player wins, rock crushes scissors
                        if(computerSelection === hand.s) m = outcome.w + rule.r;
                        // player loses, paper covers rock
                        else m = outcome.l + rule.p;
                        break;
                    // players is paper
                    case hand.p:
                        // player wins, paper covers rock
                        if(computerSelection === hand.r) m = outcome.w + rule.p;
                        // player loses, scissors cut paper
                        else m = outcome.l + rule.s;
                        break;
                    // player is scissors
                    case hand.s:
                        // player wins, scissors cut paper
                        if(computerSelection === hand.p) m = outcome.w + rule.s;
                        // player loses, rock crushes scissors
                        else m = outcome.l + rule.r;
                        break;

                    default:
                        m = "Invalid input";
                } 
            }

            return m;
        }

        function game() {
            let winner = 0;
            for(i=0; i<5; i++){
                let playerHand = prompt("Enter Rock, Paper, or Scissors");
                if(playerHand == undefined) break;
                
                let m = playRound(playerHand, computerPlay());
                console.log(m);

                if(m.match(/Win/i)) winner++;
                else if(m.match(/Lose/i)) winner--;
            }

            console.log("");
            if(winner > 0) console.log("Winner!");
            else if(winner < 0) console.log("Looser!");
            else console.log("Draw!")
        }

        game();

    </script>
</html>